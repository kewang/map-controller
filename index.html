<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>map-controller by kewang</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">map-controller</h1>
      <h2 class="project-tagline">Control Google Maps v2 for Android</h2>
      <a href="https://github.com/kewang/map-controller" class="btn">View on GitHub</a>
      <a href="https://github.com/kewang/map-controller/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/kewang/map-controller/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><a href="https://jitpack.io/#kewang/map-controller"><img src="https://jitpack.io/v/kewang/map-controller.svg" alt="Release"></a></p>

<h1>
<a id="map-controller" class="anchor" href="#map-controller" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>map-controller</h1>

<p>Control Google Maps v2 for Android</p>

<h2>
<a id="samples" class="anchor" href="#samples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Samples</h2>

<p><a href="https://github.com/kewang/map-controller-samples">https://github.com/kewang/map-controller-samples</a></p>

<h2>
<a id="prerequisite" class="anchor" href="#prerequisite" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Prerequisite</h2>

<p>You must know how to set up your Maps v2 from <a href="https://developers.google.com/maps/documentation/android/start">official article</a>.</p>

<h2>
<a id="dependency" class="anchor" href="#dependency" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dependency</h2>

<h3>
<a id="gradle" class="anchor" href="#gradle" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Gradle</h3>

<div class="highlight highlight-source-groovy-gradle"><pre><span class="pl-en">allprojects</span> {
  repositories {
    maven { url <span class="pl-s"><span class="pl-pds">"</span>https://jitpack.io<span class="pl-pds">"</span></span> }
  }
}</pre></div>

<div class="highlight highlight-source-groovy-gradle"><pre><span class="pl-en">dependencies</span> {
  compile <span class="pl-s"><span class="pl-pds">'</span>com.github.kewang:map-controller:v2.1.0<span class="pl-pds">'</span></span>
}</pre></div>

<h3>
<a id="maven" class="anchor" href="#maven" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Maven</h3>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">repositories</span>&gt;
  &lt;<span class="pl-ent">repository</span>&gt;
    &lt;<span class="pl-ent">id</span>&gt;jitpack.io&lt;/<span class="pl-ent">id</span>&gt;
    &lt;<span class="pl-ent">url</span>&gt;https://jitpack.io&lt;/<span class="pl-ent">url</span>&gt;
  &lt;/<span class="pl-ent">repository</span>&gt;
&lt;/<span class="pl-ent">repositories</span>&gt;</pre></div>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;com.github.kewang&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;map-controller&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;v2.1.0&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

<h2>
<a id="how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to use</h2>

<h3>
<a id="initialize" class="anchor" href="#initialize" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Initialize</h3>

<p>At first, you must use to <code>MapController#initialize(Context)</code> to initial Google Maps at <code>android.app.Application</code> and remember to update <code>AndroidManifest.xml</code>.</p>

<div class="highlight highlight-source-java"><pre>@<span class="pl-smi">Override</span>
<span class="pl-k">public</span> <span class="pl-k">void</span> onCreate() {
    <span class="pl-v">super</span><span class="pl-k">.</span>onCreate();

    <span class="pl-k">try</span> {
        <span class="pl-smi">MapController</span><span class="pl-k">.</span>initialize(<span class="pl-v">this</span>);
    } <span class="pl-k">catch</span> (<span class="pl-smi">GooglePlayServicesNotAvailableException</span> e) {
        e<span class="pl-k">.</span>printStackTrace();

        <span class="pl-smi">Toast</span><span class="pl-k">.</span>makeText(<span class="pl-v">this</span>, <span class="pl-smi">R</span><span class="pl-k">.</span>string<span class="pl-k">.</span>common_google_play_services_enable_text, <span class="pl-smi">Toast</span><span class="pl-k">.</span><span class="pl-smi">Length_SHORT</span>)<span class="pl-k">.</span>show();
    }
}</pre></div>

<h3>
<a id="attach" class="anchor" href="#attach" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Attach</h3>

<p>When using it, You must create an instance to attach map from <code>MapView#getMap()</code> / <code>MapFragment#getMap()</code>.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MainActivity</span> <span class="pl-k">extends</span> <span class="pl-e">Activity</span> <span class="pl-k">implements</span> <span class="pl-e">MapControllerReady</span> {
    <span class="pl-k">private</span> <span class="pl-smi">MapView</span> mv;
    <span class="pl-k">private</span> <span class="pl-smi">MapController</span> mc;

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">onCreate</span>(<span class="pl-smi">Bundle</span> <span class="pl-v">savedInstanceState</span>) {
        setContentView(<span class="pl-smi">R</span><span class="pl-k">.</span>layout<span class="pl-k">.</span>main);

        mv <span class="pl-k">=</span> (<span class="pl-smi">MapView</span>) findViewById(<span class="pl-smi">R</span><span class="pl-k">.</span>id<span class="pl-k">.</span>map);

        mc <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">MapController</span>(mv, <span class="pl-v">this</span>);
        <span class="pl-c">// or use below statement</span>
        <span class="pl-c">// new MapController(mv, this);</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">already</span>(<span class="pl-smi">MapController</span> <span class="pl-v">controller</span>) {
        controller<span class="pl-k">.</span>moveToMyLocation();
    }
}</pre></div>

<h3>
<a id="show-my-location" class="anchor" href="#show-my-location" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Show my location</h3>

<p>Typically, you can use <code>MapController#showMyLocation()</code> to show your location.</p>

<h3>
<a id="move-to-my-location" class="anchor" href="#move-to-my-location" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Move to my location</h3>

<p>You can use <code>MapController#moveToMyLocation()</code> to move your current location. Also you can use <code>MapController#animateToMyLocation()</code> to move smoothly.</p>

<h3>
<a id="get-my-location" class="anchor" href="#get-my-location" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Get my location</h3>

<p>You can use <code>MapController#getMyLocation()</code> to get your current location.</p>

<h3>
<a id="tracking-my-location" class="anchor" href="#tracking-my-location" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tracking my location</h3>

<p>If you want to track your location at runtime and do something. You can use <code>MapController#startTrackMyLocation()</code> like this:</p>

<div class="highlight highlight-source-java"><pre>mc<span class="pl-k">.</span>startTrackMyLocation(<span class="pl-k">new</span> <span class="pl-smi">ChangeMyLocation</span>() {
    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">changed</span>(<span class="pl-smi">GoogleMap</span> <span class="pl-v">map</span>, <span class="pl-smi">Location</span> <span class="pl-v">location</span>) {
        <span class="pl-smi">Toast</span><span class="pl-k">.</span>makeText(<span class="pl-smi">TrackingMyLocation</span><span class="pl-k">.</span><span class="pl-v">this</span>, location<span class="pl-k">.</span>toString(), <span class="pl-smi">Toast</span><span class="pl-c1"><span class="pl-k">.</span>LENGTH_SHORT</span>)<span class="pl-k">.</span>show();
    }
});</pre></div>

<p>And don't forget to stop tracking <code>MapController#stopTrackMyLocation()</code> when you leave the activity or service.</p>

<h3>
<a id="move-to-specific-location" class="anchor" href="#move-to-specific-location" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Move to specific location</h3>

<p>If you want to move to specific location, you can use <code>MapController#moveTo(LatLng)</code> or <code>MapController#animateTo(LatLng)</code> like this:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">LatLng</span> latLng <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">LatLng</span>(<span class="pl-c1">25.03338</span>, <span class="pl-c1">121.56463</span>);

mc<span class="pl-k">.</span>animateTo(latLng, <span class="pl-k">new</span> <span class="pl-smi">ChangePosition</span>() {
    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">changed</span>(<span class="pl-smi">GoogleMap</span> <span class="pl-v">map</span>, <span class="pl-smi">CameraPosition</span> <span class="pl-v">position</span>) {
        <span class="pl-smi">Toast</span><span class="pl-k">.</span>makeText(<span class="pl-smi">ShowSpecificLocation</span><span class="pl-k">.</span><span class="pl-v">this</span>, position<span class="pl-k">.</span>toString(), <span class="pl-smi">Toast</span><span class="pl-c1"><span class="pl-k">.</span>LENGTH_SHORT</span>)<span class="pl-k">.</span>show();
    }
});</pre></div>

<h3>
<a id="add-marker" class="anchor" href="#add-marker" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Add marker</h3>

<p>You can use <code>MapController#addMarker(MarkerOptions)</code> to add marker to map, like this:</p>

<div class="highlight highlight-source-java"><pre>mc<span class="pl-k">.</span>addMarker(opts, <span class="pl-k">new</span> <span class="pl-smi">MarkerCallback</span>() {
    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">invokedMarker</span>(<span class="pl-smi">GoogleMap</span> <span class="pl-v">map</span>, <span class="pl-smi">Marker</span> <span class="pl-v">marker</span>) {
        <span class="pl-smi">Toast</span><span class="pl-k">.</span>makeText(<span class="pl-smi">AddMarker</span><span class="pl-k">.</span><span class="pl-v">this</span>, marker<span class="pl-k">.</span>getId(), <span class="pl-smi">Toast</span><span class="pl-c1"><span class="pl-k">.</span>LENGTH_SHORT</span>)<span class="pl-k">.</span>show();
    }
});</pre></div>

<h3>
<a id="add-bulk-markers" class="anchor" href="#add-bulk-markers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Add bulk markers</h3>

<p>You can also use <code>MapController#addMarkers(ArrayList&lt;MarkerOptions&gt;)</code> to add bulk markers to map.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/kewang/map-controller">map-controller</a> is maintained by <a href="https://github.com/kewang">kewang</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-2030167-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
